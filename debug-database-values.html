<!DOCTYPE html>
<html>
<head>
    <title>Debug Database Values</title>
</head>
<body>
    <h1>Database Debug Test</h1>
    <button onclick="testDatabaseValues()">Test Database Values</button>
    <div id="results"></div>

    <script>
        async function testDatabaseValues() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Testing...</p>';
            
            try {
                console.log('üß™ Testing database values...');
                
                // Test 1: Check API endpoint
                const apiResponse = await fetch('/api/system-settings');
                const apiData = await apiResponse.json();
                
                console.log('üì° API Response:', apiData);
                
                resultsDiv.innerHTML += `
                    <h3>API Response:</h3>
                    <pre>${JSON.stringify(apiData, null, 2)}</pre>
                    <p><strong>Auto-logout delay from API: ${apiData.auto_logout_delay_minutes} minutes</strong></p>
                `;
                
                // Test 2: Check what the context is using
                if (window.debugAutoLogout) {
                    const contextSettings = window.debugAutoLogout.getCurrentSettings();
                    console.log('üîç Context Settings:', contextSettings);
                    
                    resultsDiv.innerHTML += `
                        <h3>Context Settings:</h3>
                        <pre>${JSON.stringify(contextSettings, null, 2)}</pre>
                        <p><strong>Auto-logout delay in context: ${contextSettings.delayMinutes} minutes</strong></p>
                    `;
                    
                    // Test 3: Force reload settings
                    console.log('üîÑ Force reloading settings...');
                    await window.debugAutoLogout.forceReloadSettings();
                    
                    const reloadedSettings = window.debugAutoLogout.getCurrentSettings();
                    console.log('üîÑ Reloaded Settings:', reloadedSettings);
                    
                    resultsDiv.innerHTML += `
                        <h3>After Force Reload:</h3>
                        <pre>${JSON.stringify(reloadedSettings, null, 2)}</pre>
                        <p><strong>Auto-logout delay after reload: ${reloadedSettings.delayMinutes} minutes</strong></p>
                    `;
                }
                
            } catch (error) {
                console.error('‚ùå Test failed:', error);
                resultsDiv.innerHTML += `<p style="color: red;">Error: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>